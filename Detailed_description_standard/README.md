# readme

本文件夹中主要给出机械描述标记语言标准

详细语言标准是整个项目中承上启下的步骤，承担着机械设计与图纸绘制之间的中间层的作用，目的是为了能够给出一种完整描述机械结构的方式。

本详细语言标准出于采用衍生逻辑，描述新的机械构建如何以唯一确定的方式链接在已有的机械结构上。

机械结构如同蛋白质一样，不同的基础构件与不同的链接方式都会导致不同的结构，不同的结构可能会有不同的功能和表现，所以在描述机械结构的过程中，机械构件与链接方式都是重要的内容。

## 节点

在详细描述标准中有两种不同的节点，一种是装配线节点，一种是构件节点。

装配线节点**不描述实体**，重点在于描述其子节点同一的装配关系，代表其下的所有子节点共同组合成的整体结构。回转轴是一种特殊的装配线节点，在更多情况下，装配线节点其下的子节点没有显著相同的装配关系，由子节点之间的相互关系决定的。实体与父兄节点的链接方式主要在装配线节点中描述。

构件节点表现为**一个实体**，代表其下的所有子节点共同组合成的整体结构。与装配吸纳节点不同的是其自身也为一一个实体。需要描述该实体的材料、工艺、形貌尺寸、端口等信息。

在实际使用中，需要保证叶节点全为实体构件节点。同时每个构件节点的端口为其所有子节点的未装配端口，在该构件节点与父兄链接时，只能通过端口及端口的组合方式来描述。

### 装配线节点

关于装配线节点的详细参数及键值对见 `\src\version_1.0\doc`

装配线节点最重要的是描述子节点之间的装配顺序及关系，这里的关系由链接方式描述。每个链接方式包括 链接类型、链接端口、公差值这些部分，在实际绘图的过程中，公差值并不必要，必要的部分是链接类型和链接端口。

链接类型有 `_bearing`、`_cutting`、`contact`、`_fixed` 等，如由bearing链接的两个构件节点在模型中绘制为一个单独的实体，由fixed链接的所有构件节点都为一个整体。

链接端口有 `_right`、`_left`、`_inner_around`、`_external_around` 等，这些端口的枚举值由对应节点所表示的子树的端口决定。这些端口决定两个构件之间的相互链接方位，由于构件由基本几何体派生而来，其端口与基本集合体端口大致相似。

### 构件节点

关于构件节点的详细参数及键值对见 `\src\version_1.0\doc`

构件节点的参数主要描述了该节点的工艺、尺寸、端口等信息。

大多数构件节点都存在一个几何基体，这个基体决定改构件的三维建模形状和二维图纸形式，节点相当多的参数都是基于该几何基体的，如基于圆柱的构件节点大多都是以圆柱的直径、长度来描述的。大多数构件都有一个默认取向，在有约束的情况下，基于该取向做旋转和平移即可。

## jsonc

jsonc 是本详细描述标准的文本形式，其内容是一个json对象。其中可添加注释，注释以`//`开头，直到行尾。

可以有单文件或多文件多种文件结构，单文件的描述需要将所有子节点完全展开放在一个文件中。多文件的文件结构要求在一个项目文件夹下创建第一个jsonc文件，此后为每一个节点在同目录下创建一个文件夹，jsonc文件存放于文件夹中，依次递归存放，这种方案的好处在于每个jsonc文件都较为简单，便于阅读和维护。同时也可以将不同的jsonc文件放在同一个文件夹下，由于此时子节点的描述方式为相对路径，只需要在加入子节点的过程中修改路径即可。

强烈建议jsonc文件名称采用对应的节点名称，以便于查找。

## jsonc生成器

用于通过输入的 py 代码生成 jsonc 文件的工具，通过这种方式可以快速方便的生成 jsonc 文件。

## 文件目录

* `src/version_1.0/doc` 包含各种文件的描述文档
* `src/version_1.0/jsonc` 包含基础构件的jsonc文件
* `src/version_1.0/spirit` 包含jsonc文件生成器的源代码
* `src/version_1.0/exampleModel` 包含基础构件的实体建模及图纸描述。
